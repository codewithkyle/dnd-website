import{environment as t}from"./config.mjs";export const env=new class{constructor(){this.handleNetworkChange=()=>{this.connection=window.navigator.connection.effectiveType},this.memory=4,this.cpu=window.navigator.hardwareConcurrency,this.connection="4g",this.isProduciton="production"===t,this.isDebug=!this.isProduciton,this.domState="hard-loading",this.dataSaver=!1,this._tickets=[],this.init()}init(){"connection"in navigator&&(this.connection=window.navigator.connection.effectiveType,this.dataSaver=window.navigator.connection.saveData,navigator.connection.onchange=this.handleNetworkChange),"deviceMemory"in navigator&&(this.memory=window.navigator.deviceMemory),document.documentElement.getAttribute("debug")&&(this.isDebug=!0),window.location.search&&new URL(window.location.href).searchParams.get("debug")&&(this.isDebug=!0)}stopLoading(t){if(!(!t&&this.isDebug||"string"!=typeof t&&this.isDebug)){for(let e=0;e<this._tickets.length;e++)if(this._tickets[e]===t){this._tickets.splice(e,1);break}0===this._tickets.length&&"hard-loading"!==this.domState&&(this.domState="idling",document.documentElement.setAttribute("state",this.domState))}}startLoading(){"hard-loading"!==this.domState&&(this.domState="soft-loading",document.documentElement.setAttribute("state",this.domState));const t=this.uuid();return this._tickets.push(t),t}startPageTransition(){this.domState="page-loading",document.documentElement.setAttribute("state",this.domState)}endPageTransition(){this.domState="page-loading-complete",document.documentElement.setAttribute("state",this.domState),setTimeout(()=>{this._tickets.length?(this.domState="soft-loading",document.documentElement.setAttribute("state",this.domState)):(this.domState="idling",document.documentElement.setAttribute("state",this.domState))},600)}uuid(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}setDOMState(t){this.domState=t,document.documentElement.setAttribute("state",this.domState)}};export const debug=env.isDebug;export const uuid=env.uuid;export const dataSaver=env.dataSaver;