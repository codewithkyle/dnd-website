!function(t){var e={};function n(a){if(e[a])return e[a].exports;var o=e[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(a,o,function(e){return t[e]}.bind(null,o));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=10)}([function(t,e,n){"use strict";n.r(e),n.d(e,"render",(function(){return U})),n.d(e,"hydrate",(function(){return H})),n.d(e,"createElement",(function(){return f})),n.d(e,"h",(function(){return f})),n.d(e,"Fragment",(function(){return y})),n.d(e,"createRef",(function(){return v})),n.d(e,"isValidElement",(function(){return o})),n.d(e,"Component",(function(){return w})),n.d(e,"cloneElement",(function(){return j})),n.d(e,"createContext",(function(){return B})),n.d(e,"toChildArray",(function(){return N})),n.d(e,"_unmount",(function(){return A})),n.d(e,"options",(function(){return a}));var a,o,s,i,r,l,c,p,u={},d=[],h=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function m(t,e){for(var n in e)t[n]=e[n];return t}function g(t){var e=t.parentNode;e&&e.removeChild(t)}function f(t,e,n){var a,o=arguments,s={};for(a in e)"key"!==a&&"ref"!==a&&(s[a]=e[a]);if(arguments.length>3)for(n=[n],a=3;a<arguments.length;a++)n.push(o[a]);if(null!=n&&(s.children=n),"function"==typeof t&&null!=t.defaultProps)for(a in t.defaultProps)void 0===s[a]&&(s[a]=t.defaultProps[a]);return b(t,s,e&&e.key,e&&e.ref,null)}function b(t,e,n,o,s){var i={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:s};return null==s&&(i.__v=i),a.vnode&&a.vnode(i),i}function v(){return{}}function y(t){return t.children}function w(t,e){this.props=t,this.context=e}function _(t,e){if(null==e)return t.__?_(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?_(t):null}function x(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return x(t)}}function k(t){(!t.__d&&(t.__d=!0)&&s.push(t)&&!i++||l!==a.debounceRendering)&&((l=a.debounceRendering)||r)(M)}function M(){for(var t;i=s.length;)t=s.sort((function(t,e){return t.__v.__b-e.__v.__b})),s=[],t.some((function(t){var e,n,a,o,s,i,r;t.__d&&(i=(s=(e=t).__v).__e,(r=e.__P)&&(n=[],(a=m({},s)).__v=a,o=L(r,s,a,e.__n,void 0!==r.ownerSVGElement,null,n,null==i?_(s):i),D(n,s),o!=i&&x(s)))}))}function C(t,e,n,a,o,s,i,r,l,c){var p,h,m,f,v,w,x,k,M,C=a&&a.__k||d,N=C.length;for(l==u&&(l=null!=i?i[0]:N?_(a,0):null),n.__k=[],p=0;p<e.length;p++)if(null!=(f=n.__k[p]=null==(f=e[p])||"boolean"==typeof f?null:"string"==typeof f||"number"==typeof f?b(null,f,null,null,f):Array.isArray(f)?b(y,{children:f},null,null,null):null!=f.__e||null!=f.__c?b(f.type,f.props,f.key,null,f.__v):f)){if(f.__=n,f.__b=n.__b+1,null===(m=C[p])||m&&f.key==m.key&&f.type===m.type)C[p]=void 0;else for(h=0;h<N;h++){if((m=C[h])&&f.key==m.key&&f.type===m.type){C[h]=void 0;break}m=null}if(v=L(t,f,m=m||u,o,s,i,r,l,c),(h=f.ref)&&m.ref!=h&&(k||(k=[]),m.ref&&k.push(m.ref,null,f),k.push(h,f.__c||v,f)),null!=v){if(null==x&&(x=v),M=void 0,void 0!==f.__d)M=f.__d,f.__d=void 0;else if(i==m||v!=l||null==v.parentNode){t:if(null==l||l.parentNode!==t)t.appendChild(v),M=null;else{for(w=l,h=0;(w=w.nextSibling)&&h<N;h+=2)if(w==v)break t;t.insertBefore(v,l),M=l}"option"==n.type&&(t.value="")}l=void 0!==M?M:v.nextSibling,"function"==typeof n.type&&(n.__d=l)}else l&&m.__e==l&&l.parentNode!=t&&(l=_(m))}if(n.__e=x,null!=i&&"function"!=typeof n.type)for(p=i.length;p--;)null!=i[p]&&g(i[p]);for(p=N;p--;)null!=C[p]&&A(C[p],C[p]);if(k)for(p=0;p<k.length;p++)I(k[p],k[++p],k[++p])}function N(t){return null==t||"boolean"==typeof t?[]:Array.isArray(t)?d.concat.apply([],t.map(N)):[t]}function S(t,e,n){"-"===e[0]?t.setProperty(e,n):t[e]="number"==typeof n&&!1===h.test(e)?n+"px":null==n?"":n}function P(t,e,n,a,o){var s,i,r,l,c;if(o?"className"===e&&(e="class"):"class"===e&&(e="className"),"style"===e)if(s=t.style,"string"==typeof n)s.cssText=n;else{if("string"==typeof a&&(s.cssText="",a=null),a)for(l in a)n&&l in n||S(s,l,"");if(n)for(c in n)a&&n[c]===a[c]||S(s,c,n[c])}else"o"===e[0]&&"n"===e[1]?(i=e!==(e=e.replace(/Capture$/,"")),r=e.toLowerCase(),e=(r in t?r:e).slice(2),n?(a||t.addEventListener(e,z,i),(t.l||(t.l={}))[e]=n):t.removeEventListener(e,z,i)):"list"!==e&&"tagName"!==e&&"form"!==e&&"type"!==e&&"size"!==e&&!o&&e in t?t[e]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==e&&(e!==(e=e.replace(/^xlink:?/,""))?null==n||!1===n?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),n):null==n||!1===n&&!/^ar/.test(e)?t.removeAttribute(e):t.setAttribute(e,n))}function z(t){this.l[t.type](a.event?a.event(t):t)}function L(t,e,n,o,s,i,r,l,c){var p,u,d,h,g,f,b,v,_,x,k,M=e.type;if(void 0!==e.constructor)return null;(p=a.__b)&&p(e);try{t:if("function"==typeof M){if(v=e.props,_=(p=M.contextType)&&o[p.__c],x=p?_?_.props.value:p.__:o,n.__c?b=(u=e.__c=n.__c).__=u.__E:("prototype"in M&&M.prototype.render?e.__c=u=new M(v,x):(e.__c=u=new w(v,x),u.constructor=M,u.render=T),_&&_.sub(u),u.props=v,u.state||(u.state={}),u.context=x,u.__n=o,d=u.__d=!0,u.__h=[]),null==u.__s&&(u.__s=u.state),null!=M.getDerivedStateFromProps&&(u.__s==u.state&&(u.__s=m({},u.__s)),m(u.__s,M.getDerivedStateFromProps(v,u.__s))),h=u.props,g=u.state,d)null==M.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),null!=u.componentDidMount&&u.__h.push(u.componentDidMount);else{if(null==M.getDerivedStateFromProps&&v!==h&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(v,x),!u.__e&&null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(v,u.__s,x)||e.__v===n.__v){for(u.props=v,u.state=u.__s,e.__v!==n.__v&&(u.__d=!1),u.__v=e,e.__e=n.__e,e.__k=n.__k,u.__h.length&&r.push(u),p=0;p<e.__k.length;p++)e.__k[p]&&(e.__k[p].__=e);break t}null!=u.componentWillUpdate&&u.componentWillUpdate(v,u.__s,x),null!=u.componentDidUpdate&&u.__h.push((function(){u.componentDidUpdate(h,g,f)}))}u.context=x,u.props=v,u.state=u.__s,(p=a.__r)&&p(e),u.__d=!1,u.__v=e,u.__P=t,p=u.render(u.props,u.state,u.context),null!=u.getChildContext&&(o=m(m({},o),u.getChildContext())),d||null==u.getSnapshotBeforeUpdate||(f=u.getSnapshotBeforeUpdate(h,g)),k=null!=p&&p.type==y&&null==p.key?p.props.children:p,C(t,Array.isArray(k)?k:[k],e,n,o,s,i,r,l,c),u.base=e.__e,u.__h.length&&r.push(u),b&&(u.__E=u.__=null),u.__e=!1}else null==i&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=E(n.__e,e,n,o,s,i,r,c);(p=a.diffed)&&p(e)}catch(t){e.__v=null,a.__e(t,e,n)}return e.__e}function D(t,e){a.__c&&a.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(t){a.__e(t,e.__v)}}))}function E(t,e,n,a,o,s,i,r){var l,c,p,h,m,g=n.props,f=e.props;if(o="svg"===e.type||o,null!=s)for(l=0;l<s.length;l++)if(null!=(c=s[l])&&((null===e.type?3===c.nodeType:c.localName===e.type)||t==c)){t=c,s[l]=null;break}if(null==t){if(null===e.type)return document.createTextNode(f);t=o?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type,f.is&&{is:f.is}),s=null,r=!1}if(null===e.type)g!==f&&t.data!=f&&(t.data=f);else{if(null!=s&&(s=d.slice.call(t.childNodes)),p=(g=n.props||u).dangerouslySetInnerHTML,h=f.dangerouslySetInnerHTML,!r){if(null!=s)for(g={},m=0;m<t.attributes.length;m++)g[t.attributes[m].name]=t.attributes[m].value;(h||p)&&(h&&p&&h.__html==p.__html||(t.innerHTML=h&&h.__html||""))}(function(t,e,n,a,o){var s;for(s in n)"children"===s||"key"===s||s in e||P(t,s,null,n[s],a);for(s in e)o&&"function"!=typeof e[s]||"children"===s||"key"===s||"value"===s||"checked"===s||n[s]===e[s]||P(t,s,e[s],n[s],a)})(t,f,g,o,r),h?e.__k=[]:(l=e.props.children,C(t,Array.isArray(l)?l:[l],e,n,a,"foreignObject"!==e.type&&o,s,i,u,r)),r||("value"in f&&void 0!==(l=f.value)&&l!==t.value&&P(t,"value",l,g.value,!1),"checked"in f&&void 0!==(l=f.checked)&&l!==t.checked&&P(t,"checked",l,g.checked,!1))}return t}function I(t,e,n){try{"function"==typeof t?t(e):t.current=e}catch(t){a.__e(t,n)}}function A(t,e,n){var o,s,i;if(a.unmount&&a.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||I(o,null,e)),n||"function"==typeof t.type||(n=null!=(s=t.__e)),t.__e=t.__d=void 0,null!=(o=t.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(t){a.__e(t,e)}o.base=o.__P=null}if(o=t.__k)for(i=0;i<o.length;i++)o[i]&&A(o[i],e,n);null!=s&&g(s)}function T(t,e,n){return this.constructor(t,n)}function U(t,e,n){var o,s,i;a.__&&a.__(t,e),s=(o=n===c)?null:n&&n.__k||e.__k,t=f(y,null,[t]),i=[],L(e,(o?e:n||e).__k=t,s||u,u,void 0!==e.ownerSVGElement,n&&!o?[n]:s?null:e.childNodes.length?d.slice.call(e.childNodes):null,i,n||u,o),D(i,t)}function H(t,e){U(t,e,c)}function j(t,e){var n,a;for(a in e=m(m({},t.props),e),arguments.length>2&&(e.children=d.slice.call(arguments,2)),n={},e)"key"!==a&&"ref"!==a&&(n[a]=e[a]);return b(t.type,n,e.key||t.key,e.ref||t.ref,null)}function B(t){var e={},n={__c:"__cC"+p++,__:t,Consumer:function(t,e){return t.children(e)},Provider:function(t){var a,o=this;return this.getChildContext||(a=[],this.getChildContext=function(){return e[n.__c]=o,e},this.shouldComponentUpdate=function(t){o.props.value!==t.value&&a.some((function(e){e.context=t.value,k(e)}))},this.sub=function(t){a.push(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){a.splice(a.indexOf(t),1),e&&e.call(t)}}),t.children}};return n.Consumer.contextType=n,n.Provider.__=n,n}a={__e:function(t,e){for(var n,a;e=e.__;)if((n=e.__c)&&!n.__)try{if(n.constructor&&null!=n.constructor.getDerivedStateFromError&&(a=!0,n.setState(n.constructor.getDerivedStateFromError(t))),null!=n.componentDidCatch&&(a=!0,n.componentDidCatch(t)),a)return k(n.__E=n)}catch(e){t=e}throw t}},o=function(t){return null!=t&&void 0===t.constructor},w.prototype.setState=function(t,e){var n;n=this.__s!==this.state?this.__s:this.__s=m({},this.state),"function"==typeof t&&(t=t(n,this.props)),t&&m(n,t),null!=t&&this.__v&&(e&&this.__h.push(e),k(this))},w.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),k(this))},w.prototype.render=y,s=[],i=0,r="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,c=u,p=0},function(t,e,n){"use strict";function a(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}n.r(e),n.d(e,"disconnect",(function(){return c})),n.d(e,"hookup",(function(){return l})),n.d(e,"message",(function(){return r})),n.d(e,"reply",(function(){return p})),n.d(e,"replyAll",(function(){return u}));const o="0.0.9";class s{constructor(){this.worker,this.setupBroadcastWorker(),this.inboxes=[],this.messageQueue=[],this.state={allowMessaging:!1},window.addEventListener("unload",()=>{this.worker.postMessage({recipient:"broadcast-worker",data:{type:"unload"}})})}async setupBroadcastWorker(){let t,e=await fetch("/broadcaster-worker.min.js");if(e.ok){const n=await e.blob();t=URL.createObjectURL(n)}else if((e=await fetch(`https://cdn.jsdelivr.net/npm/wwibs@${o}/wwibs-worker.min.js`)).ok){const n=await e.blob();t=URL.createObjectURL(n)}else console.error(`Failed to fetch the Inbox Worker from the CDN and ${location.origin}.`);t&&(this.worker=new Worker(t),this.worker.onmessage=this.handleWorkerMessage.bind(this))}flushMessageQueue(){if(this.state.allowMessaging=!0,this.messageQueue.length)for(let t=0;t<this.messageQueue.length;t++)this.worker.postMessage(this.messageQueue[t]);this.messageQueue=[]}sendDataToInboxes(t,e){for(let n=0;n<t.length;n++)try{this.inboxes[t[n]].callback(e)}catch(e){this.disconnectInbox(this.inboxes[t[n]],t[n])}}handleWorkerMessage(t){var e;const n=t.data;"broadcaster"===(null===(e=n.recipient)||void 0===e?void 0:e.trim().toLowerCase())?this.inbox(n.data):this.sendDataToInboxes(n.inboxIndexes,n.data)}sendUserDeviceInformation(){var t,e;const n={senderID:null,recipient:"broadcast-worker",messageId:null,maxAttempts:1,data:{type:"init",memory:null!==(e=null===(t=window.navigator)||void 0===t?void 0:t.deviceMemory)&&void 0!==e?e:8,isSafari:navigator.userAgent.search("Safari")>=0&&navigator.userAgent.search("Chrome")<0}};this.postMessageToWorker(n)}inbox(t){const{type:e}=t;switch(e){case"worker-ready":this.flushMessageQueue(),this.sendUserDeviceInformation();break;case"cleanup-complete":this.state.allowMessaging=!0,this.flushMessageQueue();break;case"cleanup":this.cleanup();break;case"ping":break;default:console.warn(`Unknown broadcaster message type: ${t.type}`)}}message(t,e,n=null,o=1){let s=o;isNaN(s)?s=1:s<1&&(s=1);const i={senderID:n,recipient:t,data:e,messageId:a(),maxAttempts:s};this.postMessageToWorker(i)}hookup(t,e){const n={callback:e,uid:a()},o=this.inboxes.length;this.inboxes.push(n);const s={senderID:n.uid,recipient:"broadcast-worker",messageId:null,maxAttempts:1,data:{type:"hookup",name:t,inboxAddress:o,uid:n.uid}};return this.postMessageToWorker(s),n.uid}disconnect(t){for(let e=0;e<this.inboxes.length;e++){const n=this.inboxes[e];if(n.uid===t){this.disconnectInbox(n,e);break}}}reply(t,e,n=null,o=1){let s=o;isNaN(s)?s=1:s<1&&(s=1);const i={replyID:t,senderID:n,data:e,messageId:a(),maxAttempts:s};this.postMessageToWorker(i)}replyAll(t,e,n=null,o=1){let s=o;isNaN(s)?s=1:s<1&&(s=1);const i={replyID:t,senderID:n,data:e,messageId:a(),maxAttempts:s,replyAll:!0};this.postMessageToWorker(i)}disconnectInbox(t,e){t.disconnected=!0,t.callback=()=>{};const n={senderID:null,recipient:"broadcast-worker",messageId:null,maxAttempts:1,data:{type:"disconnect",inboxAddress:e}};this.postMessageToWorker(n)}postMessageToWorker(t){this.state.allowMessaging?this.worker.postMessage(t):this.messageQueue.push(t)}cleanup(){this.state.allowMessaging=!1;const t=[],e=[];for(let n=0;n<this.inboxes.length;n++){const a=this.inboxes[n];if(!(null==a?void 0:a.disconnected)){const o={oldAddressIndex:n,newAddressIndex:e.length};e.push(a),t.push(o)}}this.inboxes=e;const n={senderID:null,recipient:"broadcast-worker",messageId:null,maxAttempts:1,data:{type:"update-addresses",addresses:t}};this.worker.postMessage(n)}}let i=document.head.querySelector("script#broadcaster")||null;i||((i=document.createElement("script")).id="broadcaster",i.innerHTML="window.globalManager = null;window.globalMessage = null;window.globalHookup = null;window.globalDisconnect = null;window.globalReply = null;window.globalReplyAll = null;",document.head.appendChild(i),globalManager=new s),globalMessage=globalManager.message.bind(globalManager);const r=globalMessage;globalHookup=globalManager.hookup.bind(globalManager);const l=globalHookup;globalDisconnect=globalManager.disconnect.bind(globalManager);const c=globalDisconnect;globalReply=globalManager.reply.bind(globalManager);const p=globalReply;globalReplyAll=globalManager.replyAll.bind(globalManager);const u=globalReplyAll},function(t,e,n){"use strict";var a,o=function(){return void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a},s=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),i=[];function r(t){for(var e=-1,n=0;n<i.length;n++)if(i[n].identifier===t){e=n;break}return e}function l(t,e){for(var n={},a=[],o=0;o<t.length;o++){var s=t[o],l=e.base?s[0]+e.base:s[0],c=n[l]||0,p="".concat(l," ").concat(c);n[l]=c+1;var u=r(p),d={css:s[1],media:s[2],sourceMap:s[3]};-1!==u?(i[u].references++,i[u].updater(d)):i.push({identifier:p,updater:f(d,e),references:1}),a.push(p)}return a}function c(t){var e=document.createElement("style"),a=t.attributes||{};if(void 0===a.nonce){var o=n.nc;o&&(a.nonce=o)}if(Object.keys(a).forEach((function(t){e.setAttribute(t,a[t])})),"function"==typeof t.insert)t.insert(e);else{var i=s(t.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(e)}return e}var p,u=(p=[],function(t,e){return p[t]=e,p.filter(Boolean).join("\n")});function d(t,e,n,a){var o=n?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(t.styleSheet)t.styleSheet.cssText=u(e,o);else{var s=document.createTextNode(o),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(s,i[e]):t.appendChild(s)}}function h(t,e,n){var a=n.css,o=n.media,s=n.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),s&&btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleSheet)t.styleSheet.cssText=a;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(a))}}var m=null,g=0;function f(t,e){var n,a,o;if(e.singleton){var s=g++;n=m||(m=c(e)),a=d.bind(null,n,s,!1),o=d.bind(null,n,s,!0)}else n=c(e),a=h.bind(null,n,e),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return a(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;a(t=e)}else o()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=o());var n=l(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var a=0;a<n.length;a++){var o=r(n[a]);i[o].references--}for(var s=l(t,e),c=0;c<n.length;c++){var p=r(n[c]);0===i[p].references&&(i[p].updater(),i.splice(p,1))}n=s}}}},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",a=t[3];if(!a)return n;if(e&&"function"==typeof btoa){var o=(i=a,r=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(l," */")),s=a.sources.map((function(t){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(t," */")}));return[n].concat(s).concat([o]).join("\n")}var i,r,l;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,a){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(a)for(var s=0;s<this.length;s++){var i=this[s][0];null!=i&&(o[i]=!0)}for(var r=0;r<t.length;r++){var l=[].concat(t[r]);a&&o[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),e.push(l))}},e}},,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const a=n(0),o=n(1),s=n(11);n(14);class i extends a.Component{constructor(){super(),this.toggleDrawer=()=>{this.setState({open:!this.state.open}),o.message("server",{type:"init-map"})},this.handleKeypress=t=>{if(this.state.open&&t instanceof KeyboardEvent){t.preventDefault(),t.stopImmediatePropagation();const e=null===this.state.characterUid;switch(t.key.toLowerCase()){case"delete":case"backspace":e&&!this.state.gmModal&&(o.message("dynamic-map",{type:"clear"}),o.message("server",{type:"clear-dynamic-map"}));break;case"d":e&&!this.state.gmModal&&this.setState({enableDrawing:!this.state.enableDrawing});break;case"tab":this.state.gmModal||this.setState({showNametags:!this.state.showNametags});break;case"escape":this.state.gmModal?this.setState({gmModal:null,gmMenuPos:null,savedPos:null}):this.setState({open:!1})}}},this.moveMarker=t=>{if(t instanceof MouseEvent){const e=t.currentTarget.getBoundingClientRect(),n={x:t.pageX+(t.offsetX-t.pageX),y:t.pageY+(t.offsetY-t.pageY)};e.x>0&&(n.x,e.x),e.y>0&&(n.y,e.y),!this.state.characterUid||t.ctrlKey||t.metaKey?this.state.characterUid&&t.ctrlKey||t.metaKey?this.setState({gmModal:"pin",savedPos:n,selectedEntityUid:null}):!this.state.characterUid&&this.state.selectedEntityUid&&o.message("server",{type:"send-position",entity:{uid:this.state.selectedEntityUid,pos:n}}):o.message("server",{type:"send-position",entity:{name:this.state.name,uid:this.state.characterUid,pos:n,type:"pc"}})}},this.toggleNameTags=()=>{this.setState({showNametags:!this.state.showNametags})},this.handleRightClick=t=>{if(t instanceof MouseEvent){t.preventDefault();const e=t.currentTarget.getBoundingClientRect(),n={x:t.pageX+(t.offsetX-t.pageX),y:t.pageY+(t.offsetY-t.pageY)};e.x>0&&(n.x,e.x),e.y>0&&(n.y,e.y),this.state.characterUid&&this.canPing?(this.canPing=!1,o.message("server",{type:"send-ping",pos:n}),o.message("pinger",{type:"ping",pos:n}),setTimeout(()=>{this.canPing=!0},900)):null===this.state.characterUid&&this.setState({gmMenuPos:n,savedPos:n,selectedEntityUid:null})}},this.closeGMMenu=t=>{t.stopImmediatePropagation(),this.setState({gmMenuPos:null,savedPos:null})},this.gmPing=t=>{t.stopImmediatePropagation(),o.message("pinger",{type:"ping",pos:this.state.savedPos}),o.message("server",{type:"send-ping",pos:this.state.savedPos}),this.setState({gmMenuPos:null,savedPos:null})},this.placePin=t=>{this.setState({gmModal:"pin"})},this.createPin=t=>{t.stopImmediatePropagation(),t.preventDefault();const e=t.currentTarget.querySelector("input");o.message("server",{type:"place-pin",label:e.value,pos:this.state.savedPos}),this.setState({gmMenuPos:null,gmModal:null,savedPos:null})},this.closeGMModal=t=>{this.setState({gmMenuPos:null,gmModal:null,savedPos:null})},this.spawnEntity=t=>{t.stopImmediatePropagation();const e=t.currentTarget;this.setState({gmModal:"entity",entityType:e.dataset.type})},this.createEntity=t=>{t.preventDefault(),t.stopImmediatePropagation();const e=t.currentTarget,n=e.querySelector("#name-input"),a=e.querySelector("#hp-input"),s=e.querySelector("#ac-input");o.message("server",{type:"add-entity",entityType:this.state.entityType,label:n.value,pos:this.state.gmMenuPos,ac:s.value,hp:a.value,entityUid:this.state.newEntity.uid}),this.setState({gmMenuPos:null,gmModal:null,entityType:null,savedPos:null})},this.entityClick=t=>{if(t.stopImmediatePropagation(),t instanceof MouseEvent){const e=t.currentTarget,n=(e.dataset.type,e.dataset.uid);null===this.state.characterUid&&(t.metaKey||t.ctrlKey?(this.setState({selectedEntityUid:null}),o.message("server",{type:"remove-entity",uid:n})):n===this.state.selectedEntityUid?this.setState({selectedEntityUid:null}):this.setState({selectedEntityUid:e.dataset.uid}))}},this.pinClick=t=>{if(t.stopImmediatePropagation(),t instanceof MouseEvent&&(t.ctrlKey||t.metaKey)){const e=t.currentTarget.dataset.uid;o.message("server",{type:"remove-pin",uid:e})}},this.toggleDrawing=t=>{const e={...this.state};this.state.enableDrawing?e.enableDrawing=!1:(e.enableDrawing=!0,o.message("dynamic-map",{type:"init",map:this.state.map,drawing:this.state.drawing})),this.setState(e)},this.clearDrawing=t=>{o.message("dynamic-map",{type:"clear"}),o.message("server",{type:"clear-dynamic-map"})},this.mapLoaded=()=>{o.message("dynamic-map",{type:"init",map:this.state.map,drawing:this.state.drawing})},this.togglePlayerInput=t=>{t.stopImmediatePropagation();let e=!this.state.allowInput;this.setState({allowInput:e}),o.message("server",{type:"allow-player-input",allowPlayers:e})},this.prefillData=t=>{const e=t.currentTarget;for(let t=0;t<this.state.monsters.length;t++)if(this.state.monsters[t].name===e.value){this.setState({newEntity:{name:e.value,ac:this.state.monsters[t].ac,hp:this.state.monsters[t].maxHitPoints,uid:this.state.monsters[t].uid}});break}},this.characterSheet=document.body.querySelector("character-sheet")||null,this.state={map:null,open:!1,entities:[],name:this.characterSheet?this.characterSheet.dataset.characterName:null,characterUid:this.characterSheet?this.characterSheet.dataset.characterUid:null,showNametags:!1,gmMenuPos:null,pins:[],gmModal:null,savedPos:null,entityType:null,selectedEntityUid:null,enableDrawing:!1,drawing:null,allowInput:!0,monsters:[],newEntity:null},this.canPing=!0,this.inboxUid=o.hookup("battle-map",this.inbox.bind(this)),document.body.addEventListener("keyup",this.handleKeypress),this.characterSheet||this.fetchMonsters()}inbox(t){switch(t.type){case"open":break;case"stop-drawing":this.setState({enableDrawing:!1});break;case"render-pins":this.setState({pins:t.pins});break;case"init-map":this.setState({map:t.url,entities:t.entities,pins:t.pins,drawing:t.drawing});break;case"render-entities":this.setState({entities:t.entities});break;case"load-map":this.setState({map:t.url,entities:[],drawing:null,enableDrawing:!1,open:!0}),o.message("dynamic-map",{type:"init",map:t.url,drawing:null});break;default:console.log(`Battle Map recieved an undefined message type: ${t.type}`)}}async fetchMonsters(){const t=document.body.querySelector("campaign-component"),e=await fetch(`${location.origin}/api/${t.dataset.campaignId}/monsters.json`,{method:"GET",credentials:"include",headers:new Headers({Accept:"application/json"})});if(e.ok){const t=await e.json();this.setState({monsters:t.data})}}render(){var t,e;let n,o=a.h("span",null,"The Game Master hasn't loaded a map yet."),i=null;switch(this.state.characterUid&&this.state.open&&this.state.map?i=a.h("div",{className:"map-action-drawer"},a.h("button",{onClick:this.toggleNameTags,className:this.state.showNametags?"is-active":""},a.h("svg",{"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},a.h("path",{fill:"currentColor",d:"M512 32H64C28.7 32 0 60.7 0 96v320c0 35.3 28.7 64 64 64h448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64zm32 384c0 17.6-14.4 32-32 32H64c-17.6 0-32-14.4-32-32V96c0-17.6 14.4-32 32-32h448c17.6 0 32 14.4 32 32v320zm-72-128H360c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zm0-64H360c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zm0-64H360c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zM208 288c44.2 0 80-35.8 80-80s-35.8-80-80-80-80 35.8-80 80 35.8 80 80 80zm0-128c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48 21.5-48 48-48zm46.8 144c-19.5 0-24.4 7-46.8 7s-27.3-7-46.8-7c-21.2 0-41.8 9.4-53.8 27.4C100.2 342.1 96 355 96 368.9V392c0 4.4 3.6 8 8 8h16c4.4 0 8-3.6 8-8v-23.1c0-7 2.1-13.8 6-19.6 5.6-8.3 15.8-13.2 27.3-13.2 12.4 0 20.8 7 46.8 7 25.9 0 34.3-7 46.8-7 11.5 0 21.7 5 27.3 13.2 3.9 5.8 6 12.6 6 19.6V392c0 4.4 3.6 8 8 8h16c4.4 0 8-3.6 8-8v-23.1c0-13.9-4.2-26.8-11.4-37.5-12.3-18-32.9-27.4-54-27.4z"})),a.h("span",null,"Nametags"))):!this.state.characterUid&&this.state.open&&this.state.map&&(i=a.h("div",{className:"map-action-drawer"},a.h("button",{onClick:this.toggleNameTags,className:this.state.showNametags?"is-active":""},a.h("svg",{"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},a.h("path",{fill:"currentColor",d:"M512 32H64C28.7 32 0 60.7 0 96v320c0 35.3 28.7 64 64 64h448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64zm32 384c0 17.6-14.4 32-32 32H64c-17.6 0-32-14.4-32-32V96c0-17.6 14.4-32 32-32h448c17.6 0 32 14.4 32 32v320zm-72-128H360c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zm0-64H360c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zm0-64H360c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zM208 288c44.2 0 80-35.8 80-80s-35.8-80-80-80-80 35.8-80 80 35.8 80 80 80zm0-128c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48 21.5-48 48-48zm46.8 144c-19.5 0-24.4 7-46.8 7s-27.3-7-46.8-7c-21.2 0-41.8 9.4-53.8 27.4C100.2 342.1 96 355 96 368.9V392c0 4.4 3.6 8 8 8h16c4.4 0 8-3.6 8-8v-23.1c0-7 2.1-13.8 6-19.6 5.6-8.3 15.8-13.2 27.3-13.2 12.4 0 20.8 7 46.8 7 25.9 0 34.3-7 46.8-7 11.5 0 21.7 5 27.3 13.2 3.9 5.8 6 12.6 6 19.6V392c0 4.4 3.6 8 8 8h16c4.4 0 8-3.6 8-8v-23.1c0-13.9-4.2-26.8-11.4-37.5-12.3-18-32.9-27.4-54-27.4z"})),a.h("span",null,"Nametags")),a.h("button",{onClick:this.toggleDrawing,className:this.state.enableDrawing?"is-active":""},a.h("svg",{"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},a.h("path",{fill:"currentColor",d:"M493.255 56.236l-37.49-37.49c-24.993-24.993-65.515-24.994-90.51 0L12.838 371.162.151 485.346c-1.698 15.286 11.22 28.203 26.504 26.504l114.184-12.687 352.417-352.417c24.992-24.994 24.992-65.517-.001-90.51zM164.686 347.313c6.249 6.249 16.379 6.248 22.627 0L368 166.627l30.059 30.059L174 420.745V386h-48v-48H91.255l224.059-224.059L345.373 144 164.686 324.687c-6.249 6.248-6.249 16.378 0 22.626zm-38.539 121.285l-58.995 6.555-30.305-30.305 6.555-58.995L63.255 366H98v48h48v34.745l-19.853 19.853zm344.48-344.48l-49.941 49.941-82.745-82.745 49.941-49.941c12.505-12.505 32.748-12.507 45.255 0l37.49 37.49c12.506 12.506 12.507 32.747 0 45.255z"})),a.h("span",null,"Drawing Mode")),a.h("button",{onClick:this.clearDrawing},a.h("svg",{"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},a.h("path",{fill:"currentColor",d:"M296 432h16a8 8 0 0 0 8-8V152a8 8 0 0 0-8-8h-16a8 8 0 0 0-8 8v272a8 8 0 0 0 8 8zm-160 0h16a8 8 0 0 0 8-8V152a8 8 0 0 0-8-8h-16a8 8 0 0 0-8 8v272a8 8 0 0 0 8 8zM440 64H336l-33.6-44.8A48 48 0 0 0 264 0h-80a48 48 0 0 0-38.4 19.2L112 64H8a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h24v368a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V96h24a8 8 0 0 0 8-8V72a8 8 0 0 0-8-8zM171.2 38.4A16.1 16.1 0 0 1 184 32h80a16.1 16.1 0 0 1 12.8 6.4L296 64H152zM384 464a16 16 0 0 1-16 16H80a16 16 0 0 1-16-16V96h320zm-168-32h16a8 8 0 0 0 8-8V152a8 8 0 0 0-8-8h-16a8 8 0 0 0-8 8v272a8 8 0 0 0 8 8z"})),a.h("span",null,"Clear Drawing")),a.h("button",{onClick:this.togglePlayerInput},this.state.allowInput?a.h("svg",{"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512"},a.h("path",{fill:"currentColor",d:"M320,64a79.94,79.94,0,0,1,45,146.05l25.67,20.21C415.71,209.73,432,178.94,432,144A111.93,111.93,0,0,0,320,32c-44.42,0-82.41,26-100.53,63.44l25.91,20.4A80,80,0,0,1,320,64ZM544,224a80,80,0,1,0-80-80A80,80,0,0,0,544,224Zm0-128a48,48,0,1,1-48,48A48,48,0,0,1,544,96Zm20,160H524a72.22,72.22,0,0,0-41.09,12.91A135.38,135.38,0,0,1,508.3,291.3,39.79,39.79,0,0,1,524,288h40c24.2,0,44,21.5,44,48a16,16,0,0,0,32,0C640,291.91,605.91,256,564,256ZM176,448a16,16,0,0,1-16-16V387.2a83.2,83.2,0,0,1,14.09-46.4C187.91,320.3,212.5,308,239.8,308c21.3,0,32.15,7.19,56,10.42L242.09,276.1c-.77,0-1.39-.1-2.18-.1-36.32,0-71.61,16.2-92.32,46.91A114.63,114.63,0,0,0,128,387.2V432a48,48,0,0,0,48,48H464a47.73,47.73,0,0,0,26.7-8.13L460.39,448ZM26,106a79.12,79.12,0,0,0-10,38,79.7,79.7,0,0,0,133.45,59.15L123.83,183a47.86,47.86,0,0,1-72.28-56.92Zm131.06,163A72.73,72.73,0,0,0,116,256H76c-41.91,0-76,35.91-76,80a16,16,0,0,0,32,0c0-26.5,19.8-48,44-48h40a39.79,39.79,0,0,1,15.7,3.3A138.6,138.6,0,0,1,157.09,268.91ZM23,1.8A7.88,7.88,0,0,0,11.77,3l-10,12.5A7.94,7.94,0,0,0,3,26.71L617,510.23A8,8,0,0,0,628.2,509l10-12.5a7.86,7.86,0,0,0-1.21-11.2Z"})):a.h("svg",{"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512"},a.h("path",{fill:"currentColor",d:"M544 224c44.2 0 80-35.8 80-80s-35.8-80-80-80-80 35.8-80 80 35.8 80 80 80zm0-128c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48 21.5-48 48-48zM320 256c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm0-192c44.1 0 80 35.9 80 80s-35.9 80-80 80-80-35.9-80-80 35.9-80 80-80zm244 192h-40c-15.2 0-29.3 4.8-41.1 12.9 9.4 6.4 17.9 13.9 25.4 22.4 4.9-2.1 10.2-3.3 15.7-3.3h40c24.2 0 44 21.5 44 48 0 8.8 7.2 16 16 16s16-7.2 16-16c0-44.1-34.1-80-76-80zM96 224c44.2 0 80-35.8 80-80s-35.8-80-80-80-80 35.8-80 80 35.8 80 80 80zm0-128c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48 21.5-48 48-48zm304.1 180c-33.4 0-41.7 12-80.1 12-38.4 0-46.7-12-80.1-12-36.3 0-71.6 16.2-92.3 46.9-12.4 18.4-19.6 40.5-19.6 64.3V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-44.8c0-23.8-7.2-45.9-19.6-64.3-20.7-30.7-56-46.9-92.3-46.9zM480 432c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16v-44.8c0-16.6 4.9-32.7 14.1-46.4 13.8-20.5 38.4-32.8 65.7-32.8 27.4 0 37.2 12 80.2 12s52.8-12 80.1-12c27.3 0 51.9 12.3 65.7 32.8 9.2 13.7 14.1 29.8 14.1 46.4V432zM157.1 268.9c-11.9-8.1-26-12.9-41.1-12.9H76c-41.9 0-76 35.9-76 80 0 8.8 7.2 16 16 16s16-7.2 16-16c0-26.5 19.8-48 44-48h40c5.5 0 10.8 1.2 15.7 3.3 7.5-8.5 16.1-16 25.4-22.4z"})),a.h("span",null,this.state.allowInput?"Disable":"Enable"," Input")))),this.state.gmModal){case"entity":n=a.h("div",{className:"gm-modal"},a.h("div",{className:"modal-backdrop",onClick:this.closeGMModal}),a.h("form",{onSubmit:this.createEntity},a.h("label",{htmlFor:"name-input",className:"block w-full font-sm font-grey-800 mb-0.5 text-left font-medium"},"Name"),a.h("input",{type:"text",id:"name-input",list:"entity-list",autocomplete:"off",onInput:this.prefillData}),a.h("datalist",{id:"entity-list"},"enemy"===this.state.entityType?this.state.monsters.map(t=>a.h("option",{value:t.name,"data-monster-id":t.uid})):null),a.h("div",{grid:"columns 2 gap-1.5"},a.h("div",null,a.h("label",{htmlFor:"hp-input",className:"block w-full font-sm font-grey-800 mb-0.5 text-left font-medium"},"Hit Points"),a.h("input",{min:0,step:1,type:"number",id:"hp-input",value:null===(t=this.state.newEntity)||void 0===t?void 0:t.hp})),a.h("div",null,a.h("label",{htmlFor:"ac-input",className:"block w-full font-sm font-grey-800 mb-0.5 text-left font-medium"},"Armor Class"),a.h("input",{min:0,step:1,type:"number",id:"ac-input",value:null===(e=this.state.newEntity)||void 0===e?void 0:e.ac}))),a.h("div",{className:"block w-full text-right"},a.h("button",{onClick:this.closeGMModal,type:"button",className:"button -text -black mr-1"},"cancel"),a.h("button",{type:"submit",className:"button -solid -primary"},"Spawn"))));break;case"pin":n=a.h("div",{className:"gm-modal"},a.h("div",{className:"modal-backdrop",onClick:this.closeGMModal}),a.h("form",{onSubmit:this.createPin},a.h("label",{htmlFor:"label-input",className:"block w-full font-sm font-grey-800 mb-0.5 text-left font-medium"},"Pin Label"),a.h("input",{type:"text",id:"label-input"}),a.h("div",{className:"block w-full text-right"},a.h("button",{onClick:this.closeGMModal,type:"button",className:"button -text -black mr-1"},"cancel"),a.h("button",{type:"submit",className:"button -solid -primary"},"Create Pin"))));break;default:n=null}let r,l=null;if(null!==this.state.gmMenuPos&&null===this.state.gmModal&&(l=a.h(a.Fragment,null,a.h("div",{className:"gm-backdrop",onClick:this.closeGMMenu}),a.h("div",{className:"gm-menu",style:{transform:`translate(${this.state.gmMenuPos.x-230}px, ${this.state.gmMenuPos.y-85}px)`}},a.h("button",{onClick:this.closeGMMenu,className:"close-button"},a.h("svg",{"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},a.h("path",{fill:"currentColor",d:"M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z"}))),a.h("button",{onClick:this.gmPing,className:"gm-button -ping"},a.h("i",null,a.h("svg",{"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},a.h("path",{fill:"currentColor",d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm42-104c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42zm-81.37-211.401l6.8 136c.319 6.387 5.591 11.401 11.985 11.401h41.17c6.394 0 11.666-5.014 11.985-11.401l6.8-136c.343-6.854-5.122-12.599-11.985-12.599h-54.77c-6.863 0-12.328 5.745-11.985 12.599z"}))),a.h("span",null,"ping")),a.h("button",{onClick:this.spawnEntity,"data-type":"enemy",className:"gm-button -enemy"},a.h("i",null,a.h("svg",{"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},a.h("path",{fill:"currentColor",d:"M507.31 462.06L448 402.75l31.64-59.03c3.33-6.22 2.2-13.88-2.79-18.87l-17.54-17.53c-6.25-6.25-16.38-6.25-22.63 0L420 324 112 16 18.27.16C8.27-1.27-1.42 7.17.17 18.26l15.84 93.73 308 308-16.69 16.69c-6.25 6.25-6.25 16.38 0 22.62l17.53 17.54a16 16 0 0 0 18.87 2.79L402.75 448l59.31 59.31c6.25 6.25 16.38 6.25 22.63 0l22.62-22.62c6.25-6.25 6.25-16.38 0-22.63zm-149.36-76.01L60.78 88.89l-5.72-33.83 33.84 5.72 297.17 297.16-28.12 28.11zm65.17-325.27l33.83-5.72-5.72 33.84L340.7 199.43l33.94 33.94L496.01 112l15.84-93.73c1.43-10-7.01-19.69-18.1-18.1l-93.73 15.84-121.38 121.36 33.94 33.94L423.12 60.78zM199.45 340.69l-45.38 45.38-28.12-28.12 45.38-45.38-33.94-33.94-45.38 45.38-16.69-16.69c-6.25-6.25-16.38-6.25-22.62 0l-17.54 17.53a16 16 0 0 0-2.79 18.87L64 402.75 4.69 462.06c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L109.25 448l59.03 31.64c6.22 3.33 13.88 2.2 18.87-2.79l17.53-17.54c6.25-6.25 6.25-16.38 0-22.63L188 420l45.38-45.38-33.93-33.93z"}))),a.h("span",null,"spawn enemy")),a.h("button",{onClick:this.spawnEntity,"data-type":"npc",className:"gm-button -npc"},a.h("i",null,a.h("svg",{"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512"},a.h("path",{fill:"currentColor",d:"M340.3 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 42.6 0 70-11.9 80.1-14.4-.1-7.5-.1-24.8 6.1-49.2-28.6 1.4-40.9 15.6-86.2 15.6-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h342c-19.4-12.9-36.2-29.2-49.7-48zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96zm386.5 325.3c2.6-14.1 2.6-28.5 0-42.6l25.8-14.9c3-1.7 4.3-5.2 3.3-8.5-6.7-21.6-18.2-41.2-33.2-57.4-2.3-2.5-6-3.1-9-1.4l-25.8 14.9c-10.9-9.3-23.4-16.5-36.9-21.3v-29.8c0-3.4-2.4-6.4-5.7-7.1-22.3-5-45-4.8-66.2 0-3.3.7-5.7 3.7-5.7 7.1v29.8c-13.5 4.8-26 12-36.9 21.3l-25.8-14.9c-2.9-1.7-6.7-1.1-9 1.4-15 16.2-26.5 35.8-33.2 57.4-1 3.3.4 6.8 3.3 8.5l25.8 14.9c-2.6 14.1-2.6 28.5 0 42.6l-25.8 14.9c-3 1.7-4.3 5.2-3.3 8.5 6.7 21.6 18.2 41.1 33.2 57.4 2.3 2.5 6 3.1 9 1.4l25.8-14.9c10.9 9.3 23.4 16.5 36.9 21.3v29.8c0 3.4 2.4 6.4 5.7 7.1 22.3 5 45 4.8 66.2 0 3.3-.7 5.7-3.7 5.7-7.1v-29.8c13.5-4.8 26-12 36.9-21.3l25.8 14.9c2.9 1.7 6.7 1.1 9-1.4 15-16.2 26.5-35.8 33.2-57.4 1-3.3-.4-6.8-3.3-8.5l-25.8-14.9zM496 400.5c-26.8 0-48.5-21.8-48.5-48.5s21.8-48.5 48.5-48.5 48.5 21.8 48.5 48.5-21.7 48.5-48.5 48.5z"}))),a.h("span",null,"spawn npc")),a.h("button",{onClick:this.placePin,className:"gm-button -pin"},a.h("i",null,a.h("svg",{"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 288 512"},a.h("path",{fill:"currentColor",d:"M144 0C64.47 0 0 64.47 0 144c0 71.31 51.96 130.1 120 141.58v197.64l16.51 24.77c3.56 5.34 11.41 5.34 14.98 0L168 483.22V285.58C236.04 274.1 288 215.31 288 144 288 64.47 223.53 0 144 0zm0 240c-52.94 0-96-43.07-96-96 0-52.94 43.06-96 96-96s96 43.06 96 96c0 52.93-43.06 96-96 96zm0-160c-35.28 0-64 28.7-64 64 0 8.84 7.16 16 16 16s16-7.16 16-16c0-17.64 14.34-32 32-32 8.84 0 16-7.16 16-16s-7.16-16-16-16z"}))),a.h("span",null,"place marker"))))),this.state.map){let t=this.state.entities.map(t=>a.h("div",{onClick:this.entityClick,"data-type":t.type,"data-uid":t.uid,className:`entity -${t.type} ${t.uid===this.state.selectedEntityUid?"is-selected":""} ${(null==t?void 0:t.hp)&&parseInt(null==t?void 0:t.hp)<=0?"is-dead":""}`,style:{transform:`translate(${t.pos.x-12}px, ${t.pos.y-12}px)`}},(null==t?void 0:t.hp)&&parseInt(null==t?void 0:t.hp)<=0?a.h("svg",{"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},a.h("path",{fill:"currentColor",d:"M344 200c-30.9 0-56 25.1-56 56s25.1 56 56 56 56-25.1 56-56-25.1-56-56-56zm-176 0c-30.9 0-56 25.1-56 56s25.1 56 56 56 56-25.1 56-56-25.1-56-56-56zM256 0C114.6 0 0 100.3 0 224c0 70.1 36.9 132.6 94.5 173.7 9.7 6.9 15.2 18.1 13.5 29.9l-6.8 47.9c-2.7 19.3 12.2 36.5 31.7 36.5h246.3c19.5 0 34.4-17.2 31.7-36.5l-6.8-47.9c-1.7-11.7 3.8-23 13.5-29.9C475.1 356.6 512 294.1 512 224 512 100.3 397.4 0 256 0zm133.7 358.6c-24.6 17.5-37.3 46.5-33.2 75.7l4.2 29.7H320v-40c0-4.4-3.6-8-8-8h-16c-4.4 0-8 3.6-8 8v40h-64v-40c0-4.4-3.6-8-8-8h-16c-4.4 0-8 3.6-8 8v40h-40.7l4.2-29.7c4.1-29.2-8.6-58.2-33.2-75.7C75.1 324.9 48 275.9 48 224c0-97 93.3-176 208-176s208 79 208 176c0 51.9-27.1 100.9-74.3 134.6z"})):null,a.h("div",{className:`tooltip ${this.state.showNametags?"is-visible":""}`},a.h("span",null,t.name)))),e=this.state.pins.map(t=>a.h("i",{onClick:this.pinClick,className:"pin","data-uid":t.uid,style:{transform:`translate(${t.pos.x-16}px, ${t.pos.y-31}px)`}},a.h("svg",{"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512"},a.h("path",{fill:"currentColor",d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"})),a.h("span",{className:this.state.showNametags?"is-visible":""},t.label)));o=a.h("div",{className:"map-wrapper"},a.h("img",{onLoad:this.mapLoaded,onClick:this.moveMarker,onContextMenu:this.handleRightClick,draggable:!1,className:"map",src:this.state.map,alt:"a D&D battle map"}),a.h("dynamic-map",{"web-component":!0,loading:"eager",className:this.state.enableDrawing?"is-active":null},a.h("canvas",null)),a.h("div",{className:"entities"},e,t),a.h("ping-manager",{"web-component":!0,loading:"eager"}),l)}r=this.state.open?a.h("svg",{"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},a.h("path",{fill:"currentColor",d:"M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z"})):a.h("svg",{"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512"},a.h("path",{fill:"currentColor",d:"M608 336h-64v-65.94L529.94 256 544 241.94v-99.88L529.94 128 544 113.94V88c0-48.52-39.47-88-88-88H80C35.88 0 0 35.89 0 80v64c0 17.64 14.34 32 32 32h80v65.94L126.06 256 112 270.06v133.38c0 55.44 41.69 105.46 98.66 108.3l312 .26C587.38 512 640 459.36 640 394.67V368c0-17.64-14.34-32-32-32zM48 128V80c0-17.64 14.34-32 32-32s32 14.36 32 32v48H48zm112 275.44v-113.5L193.94 256 160 222.06V80c0-11.38-2.38-22.2-6.69-32H456c22.06 0 40 17.94 40 40v6.06L462.06 128 496 161.94v60.12L462.06 256 496 289.94V336h-65.94L416 350.06 401.94 336H304c-17.66 0-32 14.36-32 32v40c0 15.78-6.72 30.92-18.44 41.53-11.88 10.73-27.25 15.67-43.41 14.19-28.12-2.83-50.15-29.3-50.15-60.28zm432-8.77c0 38.23-31.09 69.33-69.34 69.33H303.11c10.67-16.62 16.89-35.92 16.89-56v-24h62.06L416 417.94 449.94 384H592v10.67z"}));let c=null;if(this.state.selectedEntityUid){let t=null;for(let e=0;e<this.state.entities.length;e++)if(this.state.entities[e].uid===this.state.selectedEntityUid){if("npc"!==this.state.entities[e].type&&"enemy"!==this.state.entities[e].type)break;t=this.state.entities[e]}let e=null;if("enemy"===t.type)for(let n=0;n<this.state.monsters.length;n++)if(this.state.monsters[n].uid===t.entityUid){e=this.state.monsters[n];break}c=a.h(s.EntityDrawer,{entity:t,monster:e})}else c=a.h(s.EntityDrawer,{entity:null,monster:null});return a.h(a.Fragment,null,a.h("button",{onClick:this.toggleDrawer,className:"open-map-button"},r),a.h("div",{className:`battle-map ${this.state.open?"is-open":""}`},o),i,n,c)}}a.render(a.h(i,null),document.body.querySelector("#battle-map-mounting-point"))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EntityDrawer=void 0;const a=n(0),o=n(1);n(12);class s extends a.Component{constructor(){super(),this.updateEntity=t=>{t.preventDefault(),t.stopImmediatePropagation();const e=t.currentTarget,n=e.querySelector("#current-hp-input"),a=e.querySelector("#current-ac-input");o.message("server",{type:"update-entity",uid:this.props.entity.uid,hp:n.value,ac:a.value})},this.forceCloseDrawer=()=>{this.setState({forceClose:!0})},this.state={forceClose:!1}}componentWillReceiveProps(){this.setState({forceClose:!1})}render(){var t,e,n,o;let s=null,i=null;(null===(t=this.props)||void 0===t?void 0:t.monster)&&(i=a.h("span",{className:"font-xs font-grey-700 block mt-0.5",style:{fontStyle:"italic"}},null===(n=null===(e=this.props)||void 0===e?void 0:e.monster)||void 0===n?void 0:n.flavorText)),null!==this.props.entity&&(s=a.h("form",{className:"block w-full",onSubmit:this.updateEntity},a.h("div",{className:"w-full block text-left mb-1 pb-1 bb-1 bb-solid bb-grey-300"},a.h("span",{className:"font-grey-800 font-medium font-lg block"},this.props.entity.name),i),a.h("div",{className:"block w-full mb-1"},a.h("label",{htmlFor:"hp-input",className:"block w-full font-sm font-grey-800 mb-0.5 text-left font-medium"},"Hit Points"),a.h("input",{value:this.props.entity.hp,min:0,step:1,type:"number",id:"current-hp-input"})),a.h("div",{className:"block w-full mb-1"},a.h("label",{htmlFor:"ac-input",className:"block w-full font-sm font-grey-800 mb-0.5 text-left font-medium"},"Armor Class"),a.h("input",{value:this.props.entity.ac,min:0,step:1,type:"number",id:"current-ac-input"})),a.h("button",{className:"button -solid -primary block w-full",type:"submit"},"Update")));let r=null;return(null===(o=this.props)||void 0===o?void 0:o.monster)&&(r=a.h(a.Fragment,null,a.h("div",{className:"block w-full mt-1 pt-1 bt-1 bt-grey-300 bt-solid text-left"},a.h("span",{className:"font-grey-700 block mb-0.5"},this.props.monster.alignment),a.h("span",{className:"font-grey-700 block"},this.props.monster.speed)),a.h("div",{className:"block w-full mt-1 pt-1 bt-1 bt-grey-300 bt-solid text-left"},a.h("div",{class:"block w-full mb-0.25"},a.h("span",{className:"inline-block font-grey-800 font-bold mr-0.25"},"Str:"),a.h("span",{className:"inline-block font-grey-700"},this.props.monster.strength," (",this.props.monster.strengthModifier,")")),a.h("div",{class:"block w-full mb-0.25"},a.h("span",{className:"inline-block font-grey-800 font-bold mr-0.25"},"Dex:"),a.h("span",{className:"inline-block font-grey-700"},this.props.monster.dexterity," (",this.props.monster.dexterityModifier,")")),a.h("div",{class:"block w-full mb-0.25"},a.h("span",{className:"inline-block font-grey-800 font-bold mr-0.25"},"Con:"),a.h("span",{className:"inline-block font-grey-700"},this.props.monster.constitution," (",this.props.monster.constitutionModifier,")")),a.h("div",{class:"block w-full mb-0.25"},a.h("span",{className:"inline-block font-grey-800 font-bold mr-0.25"},"Int:"),a.h("span",{className:"inline-block font-grey-700"},this.props.monster.intelligence," (",this.props.monster.intelligenceModifier,")")),a.h("div",{class:"block w-full mb-0.25"},a.h("span",{className:"inline-block font-grey-800 font-bold mr-0.25"},"Wis:"),a.h("span",{className:"inline-block font-grey-700"},this.props.monster.wisdom," (",this.props.monster.wisdomModifier,")")),a.h("div",{class:"block w-full mb-0.25"},a.h("span",{className:"inline-block font-grey-800 font-bold mr-0.25"},"Char:"),a.h("span",{className:"inline-block font-grey-700"},this.props.monster.charisma," (",this.props.monster.charismaModifier,")"))),a.h("div",{className:"block w-full mt-1 pt-1 bt-1 bt-grey-300 bt-solid text-left"},a.h("p",{className:"font-sm font-grey-700 block mb-1 line-normal"},this.props.monster.actions?this.props.monster.actions:"This monster does not have any actions."),a.h("p",{className:"font-sm font-grey-700 block line-normal"},this.props.monster.legendaryActions?this.props.monster.legendaryActions:"This monster does not have any legendary actions.")))),a.h("div",{className:`entity-drawer ${null===this.props.entity||this.state.forceClose?"":"is-open"}`},a.h("div",{className:"block w-full h-full",style:{overflowY:"auto"}},s,r),a.h("button",{className:"close-button",onClick:this.forceCloseDrawer},a.h("svg",{"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},a.h("path",{fill:"currentColor",d:"M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z"}))))}}e.EntityDrawer=s},function(t,e,n){var a=n(2),o=n(13);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var s={insert:"head",singleton:!1};a(o,s);t.exports=o.locals||{}},function(t,e,n){(e=n(3)(!1)).push([t.i,".entity-drawer{height:100vh;width:300px;background-color:var(--white);box-shadow:var(--shadow-xl);position:fixed;top:0;right:0;transform:translateX(100%);transition:all 150ms var(--ease-in-out);opacity:0;visibility:hidden;padding:2rem;z-index:1700;pointer-events:none}.entity-drawer.is-open{visibility:visible;opacity:1;transform:translateX(0);pointer-events:all}.entity-drawer input{margin-bottom:1rem;display:block;width:100%;height:48px;padding:0 1rem;border-radius:0.25rem;background-color:var(--neutral-100);transition:all 150ms var(--ease-in-out)}.entity-drawer input:hover,.entity-drawer input:focus{background-color:var(--neutral-200)}.entity-drawer input:active{background-color:var(--neutral-300)}.entity-drawer .close-button{position:absolute;top:50%;left:-24px;width:48px;height:48px;border-radius:50%;background-color:var(--white);box-shadow:var(--shadow-md);color:var(--grey-700);cursor:pointer;border:1px solid var(--grey-100);transform:translateY(-50%);transition:all 150ms var(--ease-in-out);transform-origin:center}.entity-drawer .close-button:hover{color:var(--primary-700)}.entity-drawer .close-button:active{box-shadow:var(--shadow-sm);transform:scale(0.87) translateY(-50%)}.entity-drawer .close-button svg{width:24px;height:24px;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}\n",""]),t.exports=e},function(t,e,n){var a=n(2),o=n(15);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var s={insert:"head",singleton:!1};a(o,s);t.exports=o.locals||{}},function(t,e,n){(e=n(3)(!1)).push([t.i,'.battle-map{background-color:var(--white);position:fixed;width:100vw;height:100vh;top:0;left:0;transition:all 150ms var(--ease-in-out);visibility:hidden;opacity:0;z-index:1500;display:flex;align-items:center;justify-content:center;pointer-events:none;user-select:none}.battle-map.is-open{visibility:visible;opacity:1;pointer-events:all}.battle-map .close-button{width:48px;height:48px;display:inline-block;background-color:var(--white);box-shadow:var(--shadow-lg);border-radius:50%;position:absolute;top:1rem;right:1rem;color:var(--grey-700);transition:all 150ms var(--ease-in-out)}.battle-map .close-button:hover{color:var(--primary-700)}.battle-map .close-button:active{box-shadow:var(--shadow-sm);transform:scale(0.87)}.battle-map .close-button svg{width:24px;height:24px;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.battle-map .entities{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.battle-map .entities .pin{width:32px;height:32px;position:absolute;top:0;left:0;pointer-events:all;cursor:pointer}.battle-map .entities .pin:hover{z-index:100}.battle-map .entities .pin:hover span{opacity:1;visibility:visible}.battle-map .entities .pin::before{content:"";display:inline-block;width:8px;height:8px;border-radius:50%;position:absolute;bottom:-3px;left:50%;transform:translate(-50%, 0);background-color:var(--black);opacity:0.06}.battle-map .entities .pin svg{color:var(--primary-700);width:100%;height:100%;position:absolute;top:50%;left:50%;transform-origin:center;transform:translate(-50%, -50%);filter:drop-shadow(var(--shadow-md))}.battle-map .entities .pin span{position:absolute;top:-26px;left:50%;transform:translate(-50%, 0);opacity:0;visibility:hidden;transition:all 150ms var(--ease-in-out);cursor:default;font-size:0.75rem;text-transform:uppercase;font-weight:var(--font-medium);color:var(--white);display:inline-block;line-height:24px;height:24px;background-color:var(--grey-800);box-shadow:var(--shadow-md);padding:0 0.5rem;border-radius:0.125rem;font-style:normal;white-space:nowrap;pointer-events:none}.battle-map .entities .pin span.is-visible{opacity:1;visibility:visible}.battle-map .entities .entity{display:inline-block;width:24px;height:24px;border-radius:50%;box-shadow:var(--shadow-md);position:absolute;top:0;left:0;transition:all 300ms var(--ease-in-out);pointer-events:all;cursor:pointer;border-width:0 1px 2px 1px;border-style:solid;outline:2px dashed transparent;outline-offset:1px}.battle-map .entities .entity.is-selected{outline-color:var(--black)}.battle-map .entities .entity.-pc{background-color:#4299E1;border-color:#2c8dde}.battle-map .entities .entity.-enemy{background-color:#F56565;border-color:#f45757}.battle-map .entities .entity.-npc{background-color:#ECC94B;border-color:#eac234}.battle-map .entities .entity.is-dead{background-color:var(--white);border-color:#f2f2f2}.battle-map .entities .entity.is-dead svg{width:14px;height:14px;color:var(--neutral-700);position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.battle-map .entities .entity:hover{z-index:100}.battle-map .entities .entity:hover .tooltip{opacity:1;visibility:visible}.battle-map .entities .entity .tooltip{position:absolute;top:-22px;left:50%;transform:translate(-50%, 0);opacity:0;visibility:hidden;transition:all 150ms var(--ease-in-out);cursor:default;pointer-events:none}.battle-map .entities .entity .tooltip.is-visible{opacity:1;visibility:visible}.battle-map .entities .entity .tooltip::before{content:"";display:inline-block;width:12px;height:12px;border-radius:0.125rem;position:absolute;bottom:-6px;left:50%;transform:translate(-50%, 0) rotate(45deg);background-color:var(--grey-800);box-shadow:var(--shadow-md);z-index:1}.battle-map .entities .entity .tooltip span{font-size:0.75rem;text-transform:uppercase;font-weight:var(--font-medium);color:var(--white);display:inline-block;z-index:2;line-height:24px;height:24px;background-color:var(--grey-800);box-shadow:var(--shadow-md);padding:0 0.5rem;border-radius:0.125rem;font-style:normal;white-space:nowrap}.battle-map .gm-menu{position:absolute;top:0;left:0;width:460px;height:170px;opacity:0;animation:fadeIn 150ms var(--ease-in) forwards;pointer-events:none}.battle-map .gm-menu .gm-button{display:inline-flex;justify-content:center;align-items:center;padding:0 1rem;border-radius:0.25rem;color:var(--grey-300);transition:all 150ms var(--ease-in-out);box-shadow:var(--shadow-md);background-color:var(--grey-900);height:36px;position:absolute;text-transform:uppercase;cursor:pointer;font-weight:var(--font-medium);pointer-events:all}.battle-map .gm-menu .gm-button:hover{color:var(--grey-100);background-color:var(--grey-800)}.battle-map .gm-menu .gm-button:active{color:var(--white);background-color:var(--grey-900)}.battle-map .gm-menu .gm-button.-ping{top:0;left:50%;transform:translate(-50%, 0)}.battle-map .gm-menu .gm-button.-enemy{top:50%;right:0;transform:translate(0, -50%);width:180px}.battle-map .gm-menu .gm-button.-npc{top:50%;left:0;transform:translate(0, -50%);width:180px}.battle-map .gm-menu .gm-button.-pin{bottom:0;left:50%;transform:translate(-50%, 0)}.battle-map .gm-menu .gm-button i{margin-right:0.5rem;width:24px;height:24px;display:inline-flex;justify-content:center;align-items:center}.battle-map .gm-menu .gm-button i svg{width:18px;height:18px}.battle-map .gm-menu .close-button{pointer-events:all;width:36px;height:36px;border-radius:50%;box-shadow:var(--shadow-md);background-color:var(--grey-700);cursor:pointer;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%) scale(1);color:var(--grey-300);transition:all 150ms var(--ease-in-out);display:inline-flex;justify-content:center;align-items:center}.battle-map .gm-menu .close-button:hover{color:var(--grey-100);background-color:var(--grey-800)}.battle-map .gm-menu .close-button:active{color:var(--white);background-color:var(--grey-900);transform:translate(-50%, -50%) scale(0.87)}.battle-map .gm-menu .close-button svg{width:18px;height:18px}.battle-map .gm-backdrop{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:all}.battle-map .map-wrapper{max-width:100vw;max-height:100vh;overflow:auto;position:relative;overscroll-behavior:contain}.battle-map .map-wrapper .map{position:relative;display:block;cursor:default}.battle-map .map-wrapper ping-manager{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.battle-map .map-wrapper ping-manager ping-component{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;width:42px;height:42px}.battle-map .map-wrapper ping-manager ping-component::before{content:"";display:inline-block;width:100%;height:100%;border-radius:50%;background-color:#ECC94B;opacity:0;animation:pingPos 900ms var(--ease-in-out);position:absolute;top:50%;left:50%;border:2px solid #d4ab16;transform:translate(-50%, -50%) scale(0)}.battle-map .map-wrapper ping-manager ping-component svg{width:24px;height:24px;color:#d4ab16;position:absolute;top:50%;left:50%;opacity:0;transform:translate(-50%, -50%) rotate(-15deg) scale(0);animation:wigglePing 900ms var(--ease-in-out)}.open-map-button{width:48px;height:48px;display:inline-block;background-color:var(--white);box-shadow:var(--shadow-lg);border-radius:50%;color:var(--grey-700);transition:all 150ms var(--ease-in-out);pointer-events:all;z-index:1600;user-select:none}.open-map-button:hover{color:var(--primary-700)}.open-map-button:active{box-shadow:var(--shadow-sm);transform:scale(0.87)}.open-map-button svg{width:24px;height:24px;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.map-action-drawer{position:fixed;top:0;left:50%;transform:translate(-50%, 0);border-radius:0 0 0.5rem 0.5rem;background-color:var(--white);box-shadow:var(--shadow-lg);z-index:1600;padding:1rem;display:block;text-align:center;width:768px;max-width:90vw;pointer-events:all;border-width:0px 1px 1px 1px;border-style:solid;border-color:var(--grey-200);user-select:none}.map-action-drawer button{padding:0 1rem;height:36px;display:inline-flex;align-items:center;margin-right:0 0.5rem;color:var(--grey-700);position:relative}.map-action-drawer button.is-active{color:var(--primary-700)}.map-action-drawer button:hover{color:var(--primary-700)}.map-action-drawer button:hover::before{opacity:0.06;transform:translate(-50%, -50%) scale(1);transition:all 150ms var(--ease-bounce)}.map-action-drawer button:active::before{opacity:0.1;transform:translate(-50%, -50%) scale(1)}.map-action-drawer button::before{background-color:var(--primary-500);content:"";display:inline-block;width:100%;height:100%;border-radius:0.125rem;opacity:0.06;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%) scale(0);transition:all 75ms var(--ease-in-out)}.map-action-drawer button svg{width:18px;height:18px;margin-right:0.5rem}.map-action-drawer button span{font-size:0.875rem}.gm-modal{position:fixed;top:0;left:0;width:100vw;height:100vh;pointer-events:all;display:flex;justify-content:center;align-items:center;z-index:2000}.gm-modal .modal-backdrop{width:100%;height:100%;position:absolute;top:0;left:0;background-color:var(--black);opacity:0.3}.gm-modal form{width:420px;max-width:90vw;background-color:var(--white);box-shadow:var(--shadow-lg);border-radius:0.25rem;padding:2rem}.gm-modal form input{margin-bottom:1rem;display:block;width:100%;height:48px;padding:0 1rem;border-radius:0.25rem;background-color:var(--neutral-100);transition:all 150ms var(--ease-in-out)}.gm-modal form input:hover,.gm-modal form input:focus{background-color:var(--neutral-200)}.gm-modal form input:active{background-color:var(--neutral-300)}dynamic-map{pointer-events:none;position:absolute;width:100%;height:100%;position:absolute;top:0;left:0;opacity:0.6;transition:all 150ms var(--ease-in-out)}dynamic-map.is-active{pointer-events:all;z-index:2000;opacity:0.87}dynamic-map canvas{width:100%;height:100%;display:block;cursor:crosshair}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes wigglePing{0%{opacity:0;transform:translate(-50%, -50%) rotate(-15deg) scale(0)}25%{opacity:1;transform:translate(-50%, -50%) rotate(15deg) scale(1)}50%{opacity:1;transform:translate(-50%, -50%) rotate(-15deg) scale(1)}75%{opacity:1;transform:translate(-50%, -50%) rotate(15deg) scale(1)}100%{opacity:0;transform:translate(-50%, -50%) rotate(-15deg) scale(0)}}@keyframes pingPos{0%{opacity:0;transform:translate(-50%, -50%) scale(0)}25%{opacity:0.6;transform:translate(-50%, -50%) scale(1)}50%{opacity:0.15;transform:translate(-50%, -50%) scale(0.3)}75%{opacity:0.6;transform:translate(-50%, -50%) scale(1)}100%{opacity:0;transform:translate(-50%, -50%) scale(0)}}\n',""]),t.exports=e}]);